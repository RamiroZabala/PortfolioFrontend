{"ast":null,"code":"import { DynamicComponentDirective } from 'src/app/directives/dynamic-component.directive';\nimport { FormAboutComponent } from 'src/app/components/modal/form-about/form-about.component';\nimport { Session } from 'src/app/config/config-data';\nimport { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/person-data.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../manage-buttons/manage-buttons.component\";\nimport * as i5 from \"../../directives/dynamic-component.directive\";\nfunction AboutComponent_app_manage_buttons_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-manage-buttons\", 13);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"button_edit\", true)(\"id\", 0)(\"modal_id_edit\", \"aboutModal\");\n  }\n}\nfunction AboutComponent_div_21_ng_template_2_Template(rf, ctx) {}\nfunction AboutComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", null, 14);\n    i0.ɵɵtemplate(2, AboutComponent_div_21_ng_template_2_Template, 0, 0, \"ng-template\", 15);\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function () {\n  return [\"/contact\"];\n};\nexport class AboutComponent {\n  constructor(dataService) {\n    this.dataService = dataService;\n    this.subscription = new Subscription();\n    this.is_login = Session.IS_LOGGED;\n    this.data = {\n      id: 0,\n      name: '',\n      lastname: '',\n      long_description: '',\n      short_description: '',\n      title: '',\n      nationality: '',\n      birthdate: '',\n      img_profile: '',\n      img_banner: '',\n      email: '',\n      phone: '',\n      facebook_id: '',\n      instagram_id: '',\n      twitter_id: ''\n    };\n  }\n  //ngOnInit(): void {\n  ngAfterViewInit() {\n    this.getData();\n    this.subscription = this.dataService.refresh$.subscribe(() => {\n      this.getData();\n    });\n  }\n  getData() {\n    this.dataService.getData().subscribe({\n      next: resp => {\n        this.data = resp[0];\n        this.age = Math.floor((Date.now() - Date.parse(this.data.birthdate)) / (1000 * 3600 * 24) / 365);\n        if (this.is_login) this.generateForm();\n      },\n      error: error => {\n        console.error(error);\n      }\n    });\n  }\n  generateForm() {\n    const viewContainerRef = this.dynamic.viewContainerRef;\n    const containerRef = viewContainerRef.createComponent(FormAboutComponent);\n    containerRef.instance.defaultName = this.data.name;\n    containerRef.instance.defaultLastName = this.data.lastname;\n    containerRef.instance.defaultLongDescription = this.data.long_description;\n    containerRef.instance.defaultShortDescription = this.data.short_description;\n    containerRef.instance.defaultTitle = this.data.title;\n    containerRef.instance.defaultNationality = this.data.nationality;\n    containerRef.instance.defaultBirthDate = this.data.birthdate;\n    containerRef.instance.defaultPfp = this.data.img_profile;\n    containerRef.instance.defaultBanner = this.data.img_banner;\n    containerRef.instance.defaultEmail = this.data.email;\n    containerRef.instance.defaultPhone = this.data.phone;\n    containerRef.instance.defaultFacebook = this.data.facebook_id;\n    containerRef.instance.defaultInstagram = this.data.instagram_id;\n    containerRef.instance.defaultTwitter = this.data.twitter_id;\n    /*const i = this.childComponents.findIndex(c => c.instance.id === child.id);\n    if (i !== -1) {\n      this.childComponents[i].destroy();\n      this.childComponents.splice(i, 1);\n    }\n    this.childComponents.push(containerRef);*/\n  }\n  static #_ = this.ɵfac = function AboutComponent_Factory(t) {\n    return new (t || AboutComponent)(i0.ɵɵdirectiveInject(i1.PersonDataService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AboutComponent,\n    selectors: [[\"app-about\"]],\n    viewQuery: function AboutComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(DynamicComponentDirective, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dynamic = _t.first);\n      }\n    },\n    decls: 22,\n    vars: 11,\n    consts: [[\"id\", \"About\", 1, \"row\"], [1, \"col-12\", \"mt-4\"], [1, \"card\", \"bg-transparent\", \"mb-4\"], [\"class\", \"pRelative\", 3, \"button_edit\", \"id\", \"modal_id_edit\", 4, \"ngIf\"], [1, \"row\", \"g-0\"], [1, \"img-profile\", \"col-xs-12\", \"col-sm-4\", \"col-md-4\", \"col-xl-2\", \"pRelative\"], [1, \"\"], [1, \"col-xs-12\", \"col-sm-8\", \"col-md-8\", \"col-xl-10\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [3, \"routerLink\"], [4, \"ngIf\"], [1, \"pRelative\", 3, \"button_edit\", \"id\", \"modal_id_edit\"], [\"childContainer\", \"\"], [\"appDynamicComponent\", \"\"]],\n    template: function AboutComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵtemplate(3, AboutComponent_app_manage_buttons_3_Template, 1, 3, \"app-manage-buttons\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4)(5, \"h2\");\n        i0.ɵɵtext(6, \"Sobre Mi\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 5);\n        i0.ɵɵelement(8, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 7)(10, \"div\", 8)(11, \"h4\", 9);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"p\", 10);\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"p\", 10);\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"p\", 10);\n        i0.ɵɵtext(18, \"\\u00BFTienes un proyecto interesante? \");\n        i0.ɵɵelementStart(19, \"a\", 11);\n        i0.ɵɵtext(20, \"Hablemos!\");\n        i0.ɵɵelementEnd()()()()()()()();\n        i0.ɵɵtemplate(21, AboutComponent_div_21_Template, 3, 0, \"div\", 12);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.is_login);\n        i0.ɵɵadvance(5);\n        i0.ɵɵstyleMapInterpolate1(\"background-image: url('\", ctx.data.img_profile, \"');\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\"Soy \", ctx.data.name, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate2(\"Tengo \", ctx.age, \" a\\u00F1os y soy \", ctx.data.nationality, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.data.long_description);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(10, _c0));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.is_login);\n      }\n    },\n    dependencies: [i2.NgIf, i3.RouterLink, i4.ManageButtonsComponent, i5.DynamicComponentDirective],\n    encapsulation: 2\n  });\n}","map":{"version":3,"mappings":"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","names":["DynamicComponentDirective","FormAboutComponent","Session","Subscription","i0","AboutComponent","constructor","dataService","IS_LOGGED","id","name","lastname","long_description","short_description","title","nationality","birthdate","img_profile","img_banner","email","phone","facebook_id","instagram_id","twitter_id","ngAfterViewInit","getData","subscription","refresh$","subscribe","next","resp","data","age","Math","floor","Date","now","parse","is_login","generateForm","error","console","viewContainerRef","dynamic","containerRef","createComponent","instance","defaultName","defaultLastName","defaultLongDescription","defaultShortDescription","defaultTitle","defaultNationality","defaultBirthDate","defaultPfp","defaultBanner","defaultEmail","defaultPhone","defaultFacebook","defaultInstagram","defaultTwitter","selectors","viewQuery"],"sourceRoot":"","sources":["/home/ramiro/Documentos/Portfolio/Frontend/src/app/components/about/about.component.ts","/home/ramiro/Documentos/Portfolio/Frontend/src/app/components/about/about.component.html"],"sourcesContent":["import { Component, OnInit, Input, AfterViewInit, ViewChild, NgModule } from '@angular/core';\nimport { DynamicComponentDirective } from 'src/app/directives/dynamic-component.directive';\nimport { Person } from 'src/app/models/models';\nimport { PersonDataService } from 'src/app/services/person-data.service';\nimport { FormAboutComponent } from 'src/app/components/modal/form-about/form-about.component';\nimport { Session } from 'src/app/config/config-data';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-about',\n  templateUrl: './about.component.html'\n})\nexport class AboutComponent implements AfterViewInit {\n  \n  subscription: Subscription = new Subscription;\n\n  is_login: boolean = Session.IS_LOGGED;\n\n  @ViewChild(DynamicComponentDirective) dynamic !:DynamicComponentDirective;\n\n  data: Person = {\n    id: 0,\n    name: '',\n    lastname: '',\n    long_description: '',\n    short_description: '',\n    title: '',\n    nationality: '',\n    birthdate: '',\n    img_profile: '',\n    img_banner: '',\n    email: '',\n    phone: '',\n    facebook_id: '',\n    instagram_id: '',\n    twitter_id: ''\n  };\n  //data:any;\n  age:any;\n\n  constructor(private dataService:PersonDataService){}\n\n  //ngOnInit(): void {\n  ngAfterViewInit(): void {\n    this.getData();\n\n    this.subscription = this.dataService.refresh$.subscribe(()=>{\n      this.getData();\n    })\n  }\n\n  public getData(){\n    this.dataService.getData().subscribe({\n      next: (resp) => {\n        this.data = resp[0];\n        this.age = Math.floor(((Date.now() - Date.parse(this.data.birthdate)) / (1000 * 3600 * 24))/365);\n        if(this.is_login) this.generateForm();\n      },\n      error: (error) => {\n        console.error(error);\n      }\n    });\n  }\n  generateForm():void {\n    const viewContainerRef = this.dynamic.viewContainerRef;\n    const containerRef = viewContainerRef.createComponent<any>(FormAboutComponent);\n    containerRef.instance.defaultName = this.data.name;\n    containerRef.instance.defaultLastName = this.data.lastname;\n    containerRef.instance.defaultLongDescription = this.data.long_description;\n    containerRef.instance.defaultShortDescription = this.data.short_description;\n    containerRef.instance.defaultTitle = this.data.title;\n    containerRef.instance.defaultNationality = this.data.nationality;\n    containerRef.instance.defaultBirthDate = this.data.birthdate;\n    containerRef.instance.defaultPfp = this.data.img_profile;\n    containerRef.instance.defaultBanner = this.data.img_banner;\n    containerRef.instance.defaultEmail = this.data.email;\n    containerRef.instance.defaultPhone = this.data.phone;\n    containerRef.instance.defaultFacebook = this.data.facebook_id;\n    containerRef.instance.defaultInstagram = this.data.instagram_id;\n    containerRef.instance.defaultTwitter = this.data.twitter_id;\n    /*const i = this.childComponents.findIndex(c => c.instance.id === child.id);\n    if (i !== -1) {\n      this.childComponents[i].destroy();\n      this.childComponents.splice(i, 1);\n    }\n    this.childComponents.push(containerRef);*/\n  }\n}\n","<section id=\"About\" class=\"row\">\n    \n    <div class=\"col-12 mt-4\">\n        <div class=\"card bg-transparent mb-4\">\n            <app-manage-buttons *ngIf=\"is_login\" class=\"pRelative\"\n                [button_edit]=\"true\"\n                [id]=\"0\"\n                [modal_id_edit]=\"'aboutModal'\">\n            </app-manage-buttons>\n            <div class=\"row g-0\">                    <h2>Sobre Mi</h2>\n                <div class=\"img-profile col-xs-12 col-sm-4 col-md-4 col-xl-2  pRelative \">\n                    <div class=\"\" style=\"background-image: url('{{data.img_profile}}');\"></div>\n                        <!--img class=\"card-img p-2\" [src]=\"data.img_profile\" alt=\"\"-->\n                    <!--app-manage-buttons [button_edit]=\"true\"></app-manage-buttons-->\n                </div>\n                <div class=\"col-xs-12 col-sm-8 col-md-8 col-xl-10 \">\n\n                    <div class=\"card-body\">\n\n                        <h4 class=\"card-title\" >Soy {{data.name}}</h4>\n                        <p class=\"card-text\">Tengo {{age}} años y soy {{data.nationality}}</p>\n                        <p class=\"card-text\">{{data.long_description}}</p>\n                        <p class=\"card-text\">¿Tienes un proyecto interesante? <a [routerLink]=\"['/contact']\">Hablemos!</a></p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>\n<div *ngIf=\"is_login\" #childContainer><ng-template appDynamicComponent></ng-template></div>\n<!--app-form-about //[!] Lo creo dinamicamente desde about.component.ts para evitar error tiempos de ejecucion en la definicion de   data: Person = {...}\n    [modalId]=\"'aboutModal'\"\n    [modalTitle]=\"'Editar Entrada'\"\n    [reloadHTML] = \"reloadHTML\"\n    [defaultName]=\"data.name\"\n    [defaultLastName]=\"data.lastname\"\n    [defaultTitle]=\"data.title\"\n    [defaultLongDescription]=\"data.long_description\"\n    [defaultShortDescription]=\"data.short_description\"\n    [defaultNationality]=\"data.nationality\"\n    [defaultBirthDate]=\"data.birthdate\"\n    [defaultPfp]=\"data.img_profile\"\n    [defaultBanner]=\"data.img_banner\"\n    [defaultEmail]=\"data.email\"\n    [defaultPhone]=\"data.phone\"\n    [defaultFacebook]=\"data.facebook_id\"\n    [defaultInstagram]=\"data.instagram_id\"\n    [defaultTwitter]=\"data.twitter_id\">\n</app-form-about-->\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}